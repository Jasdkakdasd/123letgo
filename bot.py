import os
import discord
import random
import asyncio
from keep_alive import keep_alive  # ‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏±‡∏ô‡∏ö‡∏≠‡∏ó‡∏î‡∏±‡∏ö

# ==============================
# üî• CONFIG (‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÜ)
TOKEN = os.getenv("DISCORD_BOT_TOKEN")  # üîë ‡πÉ‡∏ä‡πâ Environment Variable ‡πÅ‡∏ó‡∏ô Token ‡∏ï‡∏£‡∏á‡πÜ
TARGET_CHANNEL_ID = 1274612786168598538  # üìù ‡πÉ‡∏™‡πà‡πÑ‡∏≠‡∏î‡∏µ‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏ä‡∏ó‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ö‡∏≠‡∏ó‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
MUSIC_BOTS = [411916947773587456, 412347780841865216, 987654321098765432]  # üéµ ‡πÉ‡∏™‡πà‡πÑ‡∏≠‡∏î‡∏µ‡∏ö‡∏≠‡∏ó‡πÄ‡∏û‡∏•‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏∞
DELAY_KICK = 2  # ‚è≥ ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏î‡∏µ‡πÄ‡∏•‡∏¢‡πå‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏ï‡∏∞ (‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)

# ==============================
# ü§ñ ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Intents
intents = discord.Intents.default()
intents.messages = True
intents.message_content = True
intents.voice_states = True  # ‡πÉ‡∏´‡πâ‡∏ö‡∏≠‡∏ó‡πÄ‡∏´‡πá‡∏ô‡∏ß‡πà‡∏≤‡πÉ‡∏Ñ‡∏£‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á

client = discord.Client(intents=intents)

# ==============================
# ü§¨ ‡∏Ñ‡∏≥‡∏î‡πà‡∏≤‡∏Å‡∏ß‡∏ô‡∏ï‡∏µ‡∏ô‡πÜ
curse_words = [
    "‡πÄ‡∏õ‡∏¥‡∏î‡∏ö‡∏≠‡∏ó‡πÄ‡∏û‡∏•‡∏á‡∏û‡πà‡∏≠‡∏á üí©", 
    "‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏≥‡πÑ‡∏° ‡∏ö‡∏≠‡∏ó‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡πÄ‡∏´‡∏£‡∏≠ üêµ", 
    "‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏°‡∏∂‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏≠‡∏á ‡πÅ‡∏•‡πâ‡∏ß‡πÇ‡∏ó‡∏©‡∏ö‡∏≠‡∏ó? ü§°", 
    "‡∏ü‡∏±‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏ñ‡∏≠‡∏∞ üòÜ", 
    "‡πÄ‡∏õ‡∏¥‡∏î‡∏ö‡∏≠‡∏ó‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô ‡∏ö‡πâ‡∏≤‡∏ô‡∏°‡∏∂‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏û‡∏•‡∏á‡∏ü‡∏±‡∏á‡πÄ‡∏´‡∏£‡∏≠ üéß"
]

# ==============================
# üéß ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡πÄ‡∏ï‡∏∞‡∏ö‡∏≠‡∏ó‡πÄ‡∏û‡∏•‡∏á
@client.event
async def on_message(message):
    if message.author == client.user:
        return  # ‡πÑ‡∏°‡πà‡∏ï‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á

    if message.channel.id == TARGET_CHANNEL_ID:
        if "m!p" in message.content.lower() or "‡πÄ‡∏õ‡∏¥‡∏î‡∏ö‡∏≠‡∏ó‡πÄ‡∏û‡∏•‡∏á" in message.content.lower():
            try:
                await message.delete()  # ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
                response = random.choice(curse_words)  # ‡∏™‡∏∏‡πà‡∏°‡∏Ñ‡∏≥‡∏î‡πà‡∏≤
                await message.channel.send(response)  # ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏î‡πà‡∏≤ ü§£

                # ‚úÖ ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ó‡∏∏‡∏Å‡∏ä‡πà‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏ö‡∏≠‡∏ó‡πÉ‡∏ô‡∏•‡∏¥‡∏™‡∏ï‡πå‡πÑ‡∏´‡∏°
                for vc in message.guild.voice_channels:
                    for member in vc.members:
                        if member.id in MUSIC_BOTS:
                            await asyncio.sleep(DELAY_KICK)  # ‡∏î‡∏µ‡πÄ‡∏•‡∏¢‡πå 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
                            await member.move_to(None)  # ‡πÄ‡∏ï‡∏∞‡∏ö‡∏≠‡∏ó‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ä‡πà‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á
                            print(f"üîä ‡πÄ‡∏ï‡∏∞ {member.name} ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å {vc.name}")
                            await message.channel.send(f"üë¢ ‡πÄ‡∏ï‡∏∞ {member.name} ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ä‡πà‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á!")

            except discord.Forbidden:
                print("‚ùå ‡∏ö‡∏≠‡∏ó‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ï‡∏∞‡∏ö‡∏≠‡∏ó")
            except discord.HTTPException:
                print("‚ö†Ô∏è ‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ï‡∏∞‡∏ö‡∏≠‡∏ó")

# ==============================
# üöÄ ‡∏£‡∏±‡∏ô‡∏ö‡∏≠‡∏ó + ‡∏Å‡∏±‡∏ô‡∏ö‡∏≠‡∏ó‡∏î‡∏±‡∏ö
keep_alive()  # ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü Flask ‡∏Å‡∏±‡∏ô‡∏ö‡∏≠‡∏ó‡∏î‡∏±‡∏ö
client.run(TOKEN)  # ‡∏£‡∏±‡∏ô‡∏ö‡∏≠‡∏ó
